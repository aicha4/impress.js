<!DOCTYPE html>
<meta charset="utf-8" />
<title>JavaScript: Best Practices for not JavaScript programmers | Mariusz Nowak (mariusz.nowak@contractors.roche.com)</title>
<meta name="description" content="JavaScript: Best Practices for not JavaScript programmers">
<meta name="author" content="Mariusz Nowak" />

<link rel="stylesheet" href="css/font.css" />
<link rel="stylesheet" href="css/default.css" />
<link rel="stylesheet" href="css/slides.css" />
<link rel="stylesheet" href="highlight/styles/sunburst.css" />

<div id="impress" class="impress-not-supported">
  <div id="fm1" class="fallback-message hidden">
    <p>Your browser <b>doesn't support the features required</b> by impress.js,
      so you are presented with a simplified version of this presentation.</p>
    <p>For the best experience please use the latest <b>Safari</b> or
      <b>Chrome</b> browser. Firefox 10 (to be released soon)
      will also handle it.</p>
  </div>
  <div id="fm2" class="fallback-message">
    <p>If you have fast machine and recent Safari or Google Chrome installed,
      please check <a href="3d/index.html">a bit more "moving" version of that presentation</a></p>
    <p style="text-align:center"><big>Otherwise, scroll down to see the slides</big></p>
  </div>

  <div id="javascript" class="step">
    <h1><b>JavaScript</b></h1>
    <h2><b>Best Practices</b></h2>
    <h3>for not JavaScript programmers</h3>
    <h3 style="text-align: center; padding:30px 0;"><img src="roche.white.png" style="width:40%; opacity: 0.7" /></h3>
    <p class="footer">
      <span>April 2012</span> Â·
      <span>Warsaw</span>
    </p>
  </div>

  <div id="misunderstood" class="step">
    <h2><b>JavaScript</b>: The World's Most Misunderstood Programming Language</h2>
    <p><i>-- <a href="http://www.crockford.com/javascript/javascript.html">Douglas Crockford</a></i></p>
  </div>

  <div id="overall" class="step">
    <ul>
      <li>C-like syntax</li>
      <li>However has more in common with functional languages like Lisp or Scheme than with C or Java.</li>
      <li>Arrays instead of lists and objects instead of property lists.</li>
      <li>Functions are first class. It has closures</li>
    </ul>
  </div>

  <div id="functional" class="step">
    <p>Think more functional when writing JavaScript</p>
    <p class="link"><a href="http://www.nicollet.net/2011/10/functional-programming/">http://www.nicollet.net/2011/10/functional-programming/</a></p>
    <p class="link"><a href="http://seanhess.github.com/2012/02/20/functional_javascript.html">http://seanhess.github.com/2012/02/20/functional_javascript.html</a></p>
    <p>Stop writing classes</p>
    <p class="link"><a href="http://www.youtube.com/watch?v=o9pEzgHorH0">http://www.youtube.com/watch?v=o9pEzgHorH0</a></p>
    <p style="text-align: center; font-size: 1em; margin-top: 2em;">Don't try to work with JavaScript as if it's language it is not</p>
  </div>

  <div id="closure" class="step">
    <h2>Closure - lexical scope</h2>
    <p>No closures involved:</p>
    <p><pre><code>function add(x, y) {
	return x + y;
}
function add5(y) {q
	return add(5, y);
}
function add10(y) {
	return add(10, y);
}
console.log(add5(2)); // 7
console.log(add10(3)); // 13</code></pre></p>
  </div>
  <div id="closure-2" class="step">
    <p>With a closure:</p>
    <p><pre><code>function makeAdder(x) {
  return function(y) {
    return x + y;
  };
}

var add5 = makeAdder(5);
var add10 = makeAdder(10);
console.log(add5(2)); // 7
console.log(add10(3)); // 13</code></pre></p>
    <p>Closure means encapsulation</p>
    <p class="link"><a href="https://developer.mozilla.org/en/JavaScript/Guide/Closures">MDN: Closures</a></p>
    <p class="link"><a href="http://stackoverflow.com/questions/111102/how-do-javascript-closures-work">StackOverflow: How do JavaScript closures work?</a></p>
  </div>

  <div id="oop" class="step">
    <h2>Prototypal inheritance</h2>
    <p>JavaScript does not have classes</p>
    <p>Instead of object-class we have object-object relationship</p>

    <p class="link"><a href="http://manuel.kiessling.net/2012/03/23/object-orientation-and-inheritance-in-javascript-a-comprehensive-explanation/">http://manuel.kiessling.net/2012/03/23/object-orientation-and-inheritance-in-javascript-a-comprehensive-explanation/</a></p>
  </div>
  <div id="oop-sample" class="step">
    <p><pre><code>var Animal = function (dateOfBirth) {
  this.dateOfBirth = dateOfBirth;
};
Animal.prototype = {
  dateOfBirth: null,
  say: function (what) { console.log(what); },
  getAge: function () {
    return Math.floor((Date.now() - this.dateOfBirth) /
      (1000 * 60 * 60 * 24 * 365.25));
  }
};
var Dog = function (dateOfBirth, breed) {
  Animal.call(this, dateOfBirth);
  if (breed)  this.breed = breed;
};
Dog.prototype = Object.create(Animal.prototype);
Dog.prototype.say = function () {
  Animal.prototype.say.call(this, 'woof woof');
};
Dog.prototype.breed = 'mongrel';
var sparky = new Dog(new Date('2008-02-23'), 'Terrier');
sparky.name = 'Sparky';
console.log(sparky.getAge());          // 4
console.log(sparky.breed);             // 'Terrier'
console.log(sparky.name);              // 'Sparky'
console.log(sparky instanceof Animal); // true
console.log(sparky instanceof Dog);    // true</code></pre></p>
  </div>
  <div id="oop-1" class="step">
    <p><img src="inheritance.png" /></p>
  </div>
  <div id="oop-2" class="step">
    <p><pre><code>delete sparky.breed;
console.log(sparky.breed); // 'mongrel'</pre></code></p>
    <p><img src="inheritance.2.png" /></p>
  </div>
  <div id="oop-3" class="step">
    <p><pre><code>delete Dog.prototype.breed;
console.log(sparky.breed); // undefined</pre></code></p>
    <p><img src="inheritance.3.png" /></p>
  </div>
  <div id="oop-private" class="step">
    <p>There are no private or protected instance properties.</p>
    <p>Convention is to start such with underscore:</p>
    <p><pre><code>Animal.prototype._foo = function () {
  // .. private foo
}</code></pre></p>
  </div>
  <div id="oop-super" class="step">
    <p>It's verbose to call parent methods:</p>
    <p><pre><code>Dog.prototype.say = function () {
  Animal.prototype.say.call(this, 'woof woof');
};</code></pre></p>
    <p><em>It's gonna be fixed in future version of JavaScript with '<b>super</b>' keyword</em></p>
    <p>In a meantime we can help ourselves with following util: <a href="https://gist.github.com/2394476">https://gist.github.com/2394476</a></p>
    <p><pre><code>var Dog = extend(Animal, function (_super, dateOfBirth, breed) {
  _super(this, dateOfBirth);
  if (breed) this.breed = breed;
}, {
  breed: 'mongrel',
  say: function (_super) {
    _super(this, 'woof woof');
  }
});</code></pre></p>
  </div>
  <div id="ecosystem" class="step">
    <h3>JavaScript Ecosystem</h3>
    <ul>
     <li>EcmaScript (language itself)</li>
     <li>DOM</li>
     <li>HTML5
       <ul>
         <li>WebStorage</li>
         <li>ApplicationCache</li>
         <li>etc.</li>
       </ul>
    </ul>
    <p>Get to know what's part of a language and what's part of external API</p>
  </div>

  <div id="ecma" class="step">
    <h3>EcmaScript</h3>
    <ul>
      <li>Know it's API and use it extensively</li>
      <li>Know the good and the bad parts: <a href="http://www.amazon.com/JavaScript-Good-Parts-Douglas-Crockford/dp/0596517742/ref=sr_1_1?ie=UTF8&qid=1334691103&sr=8-1">JavaScript: The Good Parts by Douglas Crockford</a></li>
      <li>Some implementations are broken or incomplete, fix them: <a href="https://github.com/kriskowal/es5-shim">https://github.com/kriskowal/es5-shim</a></li>
      <li><a href="http://documentcloud.github.com/underscore/">Underscore library</a> is a good place to look for complimentary functions</li>
    </ul>
  </div>

  <div id="dom" class="step">
    <h3>DOM</h3>
    <p>Very verbose and not that friendly API</p>
    <p>If you have problem with it try <b><a href="http://jquery.com/">jQuery</a></b></p>
    <p>jQuery is great choice when you need some sophisticated HTML widgets or effect</p>
    <p><b>Do not use jQuery as an aid for language itself (EcmaScript) it's bad choice for that</b></p>
  </div>

  <div id="modules" class="step">
    <h3>Code organization</h3>
    <p>Separate your code into modules</p>
    <p>Use Module pattern:</p>
    <p><pre><code>MYNAMESPACE.module = (function() {
  var privateVar = '..';
  var privateMethod = function (args) {
    // ...
  };
  return {
    publicProperty: '..',
    publicMethod: function () {
      // ...
    }
  };
}());</pre></code></p>
    <p>Similarly good way is to write CommonJS/Node.js style modules and pack them with <a href="https://github.com/medikoo/modules-webmake">modules-webmake</a></p>
  </div>

  <div id="tests" class="step">
    <h3>Don't forget the tests</h3>
    <p>There are tons of test engines for JavaScript.</p>
    <p>Try <a href="http://busterjs.org/">Buster.js,</a> when configured it automatically runs tests in browsers and shows results in a console.</p>
    <p>If your BDD fan you may like <a href="http://pivotal.github.com/jasmine/">Jasmine</a></p>
  </div>

  <div id="questions" class="step">
    <h2>Questions?</h2>
  </div>

  <div id="thank-you" class="step final">
    <h2>Thank You!</h2>
    <div style="text-align: center; padding: 20px 0;">
      <p class="name">Mariusz Nowak</p>
      <p class="email" style="font-size: 0.75em"><a href="mailto:mariusz.nowak@contractors.roche.com">mariusz.nowak@contractors.roche.com</a></p>
      <p style="padding: 30px 0"><img src="roche.white.png" style="width:30%; opacity: 0.7" /></p>
    <div>
  </div>

  <div id="overview" class="step" data-x="2800" data-y="1000" data-scale="10"></div>
  <div class="hint"><p>Use a spacebar or arrow keys to navigate</p></div>
</div>

<div id="timer"></div>

<script src="highlight/highlight.pack.js"></script>
<script src="js/impress.js"></script>
<script src="js/default.js"></script>
</body>
</html>
